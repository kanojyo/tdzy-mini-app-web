webpackJsonp([20],{s8Ru:function(e,t){},yhOl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Xxa5"),i=a.n(n),r=a("exGp"),s=a.n(r),o=a("Dd8w"),c=a.n(o),d=a("NYxO"),l=a("3/Li"),p={data:function(){return{list:[],dialogVisible:!1,formLabelAlign:{},params:{office_id:"",department_id:[]},department_id:"",office:"",pushShow:!1}},computed:Object(d.c)({department:function(e){return e.selector.department}}),mounted:function(){this.index(),this.getDepartment()},methods:c()({},Object(d.b)({getLaboratory:"getLaboratory",getYzList:"getYzList",getDepartment:"getDepartment"}),{index:function(){var e=this;return s()(i.a.mark(function t(){var a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.l)();case 2:200===(a=t.sent).code&&(e.list=a.data);case 4:case"end":return t.stop()}},t,e)}))()},add:function(){var e=this;if(""!=this.department_id){if(this.office.department.length>0)for(var t=0;t<this.office.department.length;t++){if(this.department_id===this.office.department[t].department_id){this.$message({message:"不可重复添加",type:"warning"}),this.pushShow=!0;break}this.pushShow=!1}this.pushShow||this.department.forEach(function(t){e.department_id===t.id&&e.office.department.push({department_id:e.department_id,name:t.name})})}else this.$message({message:"请选择部门",type:"warning"})},edit:function(e){var t=this;return s()(i.a.mark(function a(){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.params.office_id=e.id,t.department_id,a.next=4,Object(l.j)({id:e.id});case 4:200===(n=a.sent).code&&(t.office=n.data,t.dialogVisible=!0);case 6:case"end":return a.stop()}},a,t)}))()},eliminate:function(){this.office.department=[],this.params.department_id=[]},handleClose:function(){var e=this;return s()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.params.department_id=[],!(e.office.department.length>0)){t.next=5;break}e.office.department.forEach(function(t){e.params.department_id.push(t.department_id)}),t.next=8;break;case 5:return e.params.department_id=[],e.$message({message:"请添加部门",type:"warning"}),t.abrupt("return");case 8:return t.next=10,Object(l.k)(e.params);case 10:200===t.sent.code&&(e.dialogVisible=!1,e.index(),e.$message({message:"编辑成功~",type:"success"}));case 12:case"end":return t.stop()}},t,e)}))()},remove:function(e){var t=this;this.$confirm("是否删除该部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.office.department.splice(e,1)}).catch(function(){t.$message({type:"info",message:"已取消操作~"})})}})},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"table"},[a("div",{staticClass:"table-list"},[a("el-table",{attrs:{data:e.list,border:"","header-cell-style":{background:"#f3f3f3"}}},[a("el-table-column",{attrs:{align:"center",prop:"name",label:"科室"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"department",label:"部门"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"address",label:"操作",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",[a("span",{staticClass:"cursor color-f8494c",on:{click:function(a){e.edit(t.row)}}},[e._v("编辑")])])]}}])})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"分配规则编辑",visible:e.dialogVisible,width:"650px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",{staticClass:"title"},[a("p",[e._v("说明:")]),e._v(" "),a("p",[e._v("1.分配顺序为规则包含部门中所有医助的创建时间升序为顺序")]),e._v(" "),a("p",[e._v("2.只会分配正常状态医助，与在线离线无关")]),e._v(" "),a("h2",[e._v(e._s(e.office.name))])]),e._v(" "),a("div",{staticClass:"form"},[a("div",[a("el-select",{attrs:{clearable:"",size:"mini",placeholder:"请选择部门"},model:{value:e.department_id,callback:function(t){e.department_id=t},expression:"department_id"}},e._l(e.department,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.add}},[e._v("添加部门")])],1)]),e._v(" "),a("table",{staticClass:"ajun-table"},[a("tr",[a("td",[e._v("部门")]),e._v(" "),a("td",[e._v("操作")])]),e._v(" "),e._l(e.office.department,function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.name))]),e._v(" "),a("td",[a("span",{staticClass:"cursor color-f8494c",on:{click:function(t){e.remove(n)}}},[e._v("删除")])])])})],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.handleClose}},[e._v("提 交")]),e._v(" "),a("el-button",{attrs:{type:"warning"},on:{click:e.eliminate}},[e._v("全部清除")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(p,f,!1,function(e){a("s8Ru")},"data-v-37b6685e",null);t.default=u.exports}});